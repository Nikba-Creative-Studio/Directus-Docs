<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data Access | Directus Docs</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <meta name="description" content="Directus 8. Future Proof Headless CMS for Managing Custom Database Content.">
    <meta name="application-name" content="Directus Docs">
    <meta name="theme-color" content="#263238">
    <meta name="apple-mobile-web-app-title" content="Directus Docs">
    <meta name="msapplication-TileColor" content="#263238">
    <meta name="msapplication-config" content="/browserconfig.xml">
    
    <link rel="preload" href="/assets/css/0.styles.2c78deb5.css" as="style"><link rel="preload" href="/assets/js/app.fad5d7fd.js" as="script"><link rel="preload" href="/assets/js/2.b0de1993.js" as="script"><link rel="preload" href="/assets/js/1.cf19b05a.js" as="script"><link rel="preload" href="/assets/js/40.f1570932.js" as="script"><link rel="prefetch" href="/assets/js/10.6f23884a.js"><link rel="prefetch" href="/assets/js/100.947a2ca6.js"><link rel="prefetch" href="/assets/js/101.cb80f760.js"><link rel="prefetch" href="/assets/js/102.fd6aed3b.js"><link rel="prefetch" href="/assets/js/103.299cf835.js"><link rel="prefetch" href="/assets/js/104.bd409e9b.js"><link rel="prefetch" href="/assets/js/105.866752f5.js"><link rel="prefetch" href="/assets/js/106.f0251ee6.js"><link rel="prefetch" href="/assets/js/107.ad778a25.js"><link rel="prefetch" href="/assets/js/108.85ff2645.js"><link rel="prefetch" href="/assets/js/109.7ec76958.js"><link rel="prefetch" href="/assets/js/11.99a846c3.js"><link rel="prefetch" href="/assets/js/110.f5c84a9a.js"><link rel="prefetch" href="/assets/js/111.1a6da713.js"><link rel="prefetch" href="/assets/js/112.4b403729.js"><link rel="prefetch" href="/assets/js/113.161a7a2d.js"><link rel="prefetch" href="/assets/js/114.272b4004.js"><link rel="prefetch" href="/assets/js/115.fea73672.js"><link rel="prefetch" href="/assets/js/116.167ead58.js"><link rel="prefetch" href="/assets/js/117.35b84d7d.js"><link rel="prefetch" href="/assets/js/118.a5f9a66c.js"><link rel="prefetch" href="/assets/js/119.57ac8144.js"><link rel="prefetch" href="/assets/js/12.fe1d5e51.js"><link rel="prefetch" href="/assets/js/120.190cfd35.js"><link rel="prefetch" href="/assets/js/121.cd40c13a.js"><link rel="prefetch" href="/assets/js/122.7fbaf0c5.js"><link rel="prefetch" href="/assets/js/13.fc4ca263.js"><link rel="prefetch" href="/assets/js/16.30e0e122.js"><link rel="prefetch" href="/assets/js/17.0fd2a8ac.js"><link rel="prefetch" href="/assets/js/18.25614d0d.js"><link rel="prefetch" href="/assets/js/19.920da6e9.js"><link rel="prefetch" href="/assets/js/20.f580d7a0.js"><link rel="prefetch" href="/assets/js/21.d6262545.js"><link rel="prefetch" href="/assets/js/22.dc4eccb8.js"><link rel="prefetch" href="/assets/js/23.c80a9c85.js"><link rel="prefetch" href="/assets/js/24.f4432ac8.js"><link rel="prefetch" href="/assets/js/25.f5d5291d.js"><link rel="prefetch" href="/assets/js/26.43486af1.js"><link rel="prefetch" href="/assets/js/27.8a20faa3.js"><link rel="prefetch" href="/assets/js/28.55953db8.js"><link rel="prefetch" href="/assets/js/29.c69efdc9.js"><link rel="prefetch" href="/assets/js/3.2714d4b3.js"><link rel="prefetch" href="/assets/js/30.98921536.js"><link rel="prefetch" href="/assets/js/31.d4e4facd.js"><link rel="prefetch" href="/assets/js/32.3301d2e2.js"><link rel="prefetch" href="/assets/js/33.be9ae374.js"><link rel="prefetch" href="/assets/js/34.6a8823f4.js"><link rel="prefetch" href="/assets/js/35.756cb774.js"><link rel="prefetch" href="/assets/js/36.02423b16.js"><link rel="prefetch" href="/assets/js/37.ebe4e17a.js"><link rel="prefetch" href="/assets/js/38.36c5ee5e.js"><link rel="prefetch" href="/assets/js/39.fb0f5b4a.js"><link rel="prefetch" href="/assets/js/4.46ba42e3.js"><link rel="prefetch" href="/assets/js/41.5a9b1d5a.js"><link rel="prefetch" href="/assets/js/42.48ccb2a4.js"><link rel="prefetch" href="/assets/js/43.d6c954d3.js"><link rel="prefetch" href="/assets/js/44.ebb58a26.js"><link rel="prefetch" href="/assets/js/45.24e9dd8c.js"><link rel="prefetch" href="/assets/js/46.7e3fbe28.js"><link rel="prefetch" href="/assets/js/47.fe1d4448.js"><link rel="prefetch" href="/assets/js/48.8fb9d084.js"><link rel="prefetch" href="/assets/js/49.b1ce3ca5.js"><link rel="prefetch" href="/assets/js/5.ef598936.js"><link rel="prefetch" href="/assets/js/50.f4ff1ae6.js"><link rel="prefetch" href="/assets/js/51.f0525890.js"><link rel="prefetch" href="/assets/js/52.629d1537.js"><link rel="prefetch" href="/assets/js/53.7bc021d8.js"><link rel="prefetch" href="/assets/js/54.582e3cd0.js"><link rel="prefetch" href="/assets/js/55.0682e7ad.js"><link rel="prefetch" href="/assets/js/56.29b777c1.js"><link rel="prefetch" href="/assets/js/57.f2a9c704.js"><link rel="prefetch" href="/assets/js/58.3b091f0d.js"><link rel="prefetch" href="/assets/js/59.72fa852e.js"><link rel="prefetch" href="/assets/js/6.af951f47.js"><link rel="prefetch" href="/assets/js/60.6bb114cd.js"><link rel="prefetch" href="/assets/js/61.945c9ae6.js"><link rel="prefetch" href="/assets/js/62.5b59ef4b.js"><link rel="prefetch" href="/assets/js/63.09e4c80b.js"><link rel="prefetch" href="/assets/js/64.1c0c7386.js"><link rel="prefetch" href="/assets/js/65.ac95aaf1.js"><link rel="prefetch" href="/assets/js/66.4f6f9048.js"><link rel="prefetch" href="/assets/js/67.ac81d8d4.js"><link rel="prefetch" href="/assets/js/68.03a6d412.js"><link rel="prefetch" href="/assets/js/69.5f580eba.js"><link rel="prefetch" href="/assets/js/7.8cc0d14b.js"><link rel="prefetch" href="/assets/js/70.1c23a2bb.js"><link rel="prefetch" href="/assets/js/71.14a8bebe.js"><link rel="prefetch" href="/assets/js/72.5dbf67d5.js"><link rel="prefetch" href="/assets/js/73.cee1543b.js"><link rel="prefetch" href="/assets/js/74.f4371a18.js"><link rel="prefetch" href="/assets/js/75.885d58db.js"><link rel="prefetch" href="/assets/js/76.c523732d.js"><link rel="prefetch" href="/assets/js/77.cc2a910a.js"><link rel="prefetch" href="/assets/js/78.d52e9890.js"><link rel="prefetch" href="/assets/js/79.ad986f82.js"><link rel="prefetch" href="/assets/js/8.a14efbad.js"><link rel="prefetch" href="/assets/js/80.1595a6c6.js"><link rel="prefetch" href="/assets/js/81.e29e74df.js"><link rel="prefetch" href="/assets/js/82.aa69b99e.js"><link rel="prefetch" href="/assets/js/83.7b3e2419.js"><link rel="prefetch" href="/assets/js/84.64b75542.js"><link rel="prefetch" href="/assets/js/85.5b34a473.js"><link rel="prefetch" href="/assets/js/86.4cb3009a.js"><link rel="prefetch" href="/assets/js/87.df4595ec.js"><link rel="prefetch" href="/assets/js/88.09ed167c.js"><link rel="prefetch" href="/assets/js/89.1a837824.js"><link rel="prefetch" href="/assets/js/9.3abffec5.js"><link rel="prefetch" href="/assets/js/90.4a302f56.js"><link rel="prefetch" href="/assets/js/91.0cae8df1.js"><link rel="prefetch" href="/assets/js/92.3918817c.js"><link rel="prefetch" href="/assets/js/93.b6936f75.js"><link rel="prefetch" href="/assets/js/94.60901b04.js"><link rel="prefetch" href="/assets/js/95.c6bfccdf.js"><link rel="prefetch" href="/assets/js/96.91c1f78a.js"><link rel="prefetch" href="/assets/js/97.ad5cdc57.js"><link rel="prefetch" href="/assets/js/98.c1efbca8.js"><link rel="prefetch" href="/assets/js/99.70855b8a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d813adee.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2c78deb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Directus Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://directus.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://directus.cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://directus.app" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/directus/directus-8-legacy" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://directus.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://directus.cloud" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloud
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://directus.app" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/directus/directus-8-legacy" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🐰 Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/getting-started/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/getting-started/installation.html" class="sidebar-link">Installation</a></li><li><a href="/getting-started/contributing.html" class="sidebar-link">Contributing</a></li><li><a href="/getting-started/supporting-directus.html" class="sidebar-link">Supporting Directus</a></li><li><a href="/getting-started/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>📖 Guides</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🚀 API Reference</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🦄 Extensions</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>🐳 Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>⚡️ Advanced</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advanced/source.html" class="sidebar-link">Local Dev Environment</a></li><li><a href="/advanced/ddev.html" class="sidebar-link">Local Dev Environment with DDEV</a></li><li><a href="/advanced/server-setup.html" class="sidebar-link">Server Setup</a></li><li><a href="/advanced/api/configuration.html" class="sidebar-link">API Configuration</a></li><li><a href="/advanced/api/data.html" aria-current="page" class="active sidebar-link">Direct Data Access</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/advanced/api/data.html#fetching-data-within-hooks-and-endpoints" class="sidebar-link">Fetching Data within Hooks and Endpoints</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>☁️ Directus Cloud</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="data-access"><a href="#data-access" class="header-anchor">#</a> Data Access</h1> <p>Directus uses Zend DB to access data from the database. It has its own class <code>Directus\Database\TableGateway\RelationalTableGateway</code> extending <code>Zend\Db\TableGateway\TableGateway</code> to add some Directus logic.</p> <p>You can use anything you want to access the data from the database, you can use PDO or even <code>Zend\Db\TableGateway\TableGateway</code>. The advantage of using the <code>Directus\Database\TableGateway\RelationalTableGateway</code> you will have the same api core data logic, such as fetching relational data and filters.</p> <h2 id="fetching-data-within-hooks-and-endpoints"><a href="#fetching-data-within-hooks-and-endpoints" class="header-anchor">#</a> Fetching Data within Hooks and Endpoints</h2> <h3 id="using-directus-tablegateway-factory"><a href="#using-directus-tablegateway-factory" class="header-anchor">#</a> Using Directus TableGateway Factory</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Using the factory</span>
<span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Application</span><span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$dbConnection</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'database'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$acl</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'acl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$tableGateway</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context">Directus<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>TableGatewayFactory</span><span class="token operator">::</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'COLLECTION_NAME'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token comment">// An Zend\Db\Adapter\Adapter instance</span>
    <span class="token string single-quoted-string">'connection'</span> <span class="token operator">=&gt;</span> <span class="token variable">$dbConnection</span><span class="token punctuation">,</span>
    <span class="token comment">// options are:</span>
    <span class="token comment">//  false = no acl validation</span>
    <span class="token comment">//  null = uses $container-&gt;get('acl')</span>
    <span class="token comment">//  an Directus\Permissions\Acl instance</span>
    <span class="token string single-quoted-string">'acl'</span> <span class="token operator">=&gt;</span> <span class="token variable">$acl</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Directus\Database\TableGatewayFactory::create</code> creates a <code>Directus\Database\TableGateway\RelationalTableGateway</code> unless there is a <code>CollectionNameTableGateway</code> class in <code>Directus\Database\TableGatway</code> namespace.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$params</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$items</span> <span class="token operator">=</span> <span class="token variable">$tableGateway</span><span class="token operator">-&gt;</span><span class="token function">getItems</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Returns an array of items</span>
<span class="token comment">// Example:</span>
<span class="token comment">// [</span>
<span class="token comment">//    'data' =&gt; [</span>
<span class="token comment">//        'id' =&gt; 1,</span>
<span class="token comment">//        'title' =&gt; 'Project title'</span>
<span class="token comment">//    ]</span>
<span class="token comment">// ];</span>
</code></pre></div><p>For <code>params</code> it can be used any <a href="https://github.com/directus/directus-8-legacy/blob/master/docs/api/reference.md#query-parameters" target="_blank" rel="noopener noreferrer">Query Parameters<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> supported by the API.</p> <h3 id="zend-db-tablegateway"><a href="#zend-db-tablegateway" class="header-anchor">#</a> Zend DB TableGateway</h3> <p>If you want to create your own custom queries using the Zend DB TableGateway gives you more flexibility, you can either use the TableGateway created by Directus TableGateway factory above, or create a instance of <code>Zend\Db\TableGateway\TableGateway</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Application</span><span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$dbConnection</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'database'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$tableGateway</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Zend<span class="token punctuation">\</span>Db<span class="token punctuation">\</span>TableGateway<span class="token punctuation">\</span>TableGateway</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'directus_users'</span><span class="token punctuation">,</span> <span class="token variable">$dbConnection</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$select</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Zend<span class="token punctuation">\</span>Db<span class="token punctuation">\</span>Sql<span class="token punctuation">\</span>Select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'directus_users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$select</span><span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$tableGateway</span><span class="token operator">-&gt;</span><span class="token function">selectWith</span><span class="token punctuation">(</span><span class="token variable">$select</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$item</span> <span class="token operator">=</span> <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you want to update a just created item, you can do it as following.</p> <p>This is especially useful in <code>:after</code> <code>action</code> hooks where you normally don't have direct access to the databases' payload anymore, but still want to modify a table.
In this case, we change the model name according to its ID, which wouldn't be possible in the <code>:before</code> hook, since we wouldn't know its ID.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Application</span><span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$dbConnection</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'database'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$tableGateway</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Zend<span class="token punctuation">\</span>Db<span class="token punctuation">\</span>TableGateway<span class="token punctuation">\</span>TableGateway</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'products'</span><span class="token punctuation">,</span> <span class="token variable">$dbConnection</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$update_data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">'model'</span>  <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;Model-&quot;</span> <span class="token operator">.</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$where</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'id'</span> <span class="token operator">=&gt;</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$tableGateway</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$update_data</span><span class="token punctuation">,</span> <span class="token variable">$where</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can read the <a href="https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html" target="_blank" rel="noopener noreferrer">Zend DB 2 Documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to know more about how to use Zend DB to select data.</p> <p>All the Zend DB TableGateway methods are available to use such as <a href="https://framework.zend.com/manual/2.2/en/modules/zend.db.sql.html#join" target="_blank" rel="noopener noreferrer">creating joins<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Application</span><span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$dbConnection</span> <span class="token operator">=</span> <span class="token variable">$container</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'database'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$tableGateway</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Zend<span class="token punctuation">\</span>Db<span class="token punctuation">\</span>TableGateway<span class="token punctuation">\</span>TableGateway</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'directus_users'</span><span class="token punctuation">,</span> <span class="token variable">$dbConnection</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$select</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Zend<span class="token punctuation">\</span>Db<span class="token punctuation">\</span>Sql<span class="token punctuation">\</span>Select</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'directus_users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$select</span><span class="token operator">-&gt;</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$select</span><span class="token operator">-&gt;</span><span class="token function">join</span><span class="token punctuation">(</span>
    <span class="token string single-quoted-string">'directus_files'</span><span class="token punctuation">,</span> <span class="token comment">// table name</span>
    <span class="token string single-quoted-string">'directus_files.id = directus_users.id'</span><span class="token punctuation">,</span> <span class="token comment">// expression to join on (will be quoted by platform object before insertion),</span>
    <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'filename'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// (optional) list of columns, same requirements as columns() above</span>
    <span class="token variable">$select</span><span class="token operator">::</span><span class="token constant">JOIN_LEFT</span> <span class="token comment">// (optional), one of inner, outer, left, right also represented by constants in the API</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$tableGateway</span><span class="token operator">-&gt;</span><span class="token function">selectWith</span><span class="token punctuation">(</span><span class="token variable">$select</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">valid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$item</span> <span class="token operator">=</span> <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="items-service"><a href="#items-service" class="header-anchor">#</a> Items Service</h3> <p>This is the same class that the API uses behind the HTTP Layer.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$container</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Application</span><span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$itemsService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name class-name-fully-qualified"><span class="token punctuation">\</span>Directus<span class="token punctuation">\</span>Services<span class="token punctuation">\</span>ItemsService</span><span class="token punctuation">(</span><span class="token variable">$container</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$params</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$items</span> <span class="token operator">=</span> <span class="token variable">$itemsService</span><span class="token operator">-&gt;</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'directus_users'</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$item</span> <span class="token operator">=</span> <span class="token variable">$itemsService</span><span class="token operator">-&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'directus_users'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="access-control"><a href="#access-control" class="header-anchor">#</a> Access Control</h3> <p>Directus ACL helps you verify user privilege to access a collection.</p> <p>Some of the ACL Methods are:</p> <div class="language- extra-class"><pre class="language-text"><code>Acl::canCreate($collection, $status = null);
Acl::canRead($collection, $status = null);
Acl::canUpdate($collection, $status = null);
Acl::canDelete($collection, $status = null);
</code></pre></div><p>You can see all the methods in the <a href="https://github.com/directus/api/blob/master/src/core/Directus/Permissions/Acl.php" target="_blank" rel="noopener noreferrer">Directus\Permissions\Acl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> class.</p> <p>Example:</p> <div class="language- extra-class"><pre class="language-text"><code>$container = \Directus\Application\Application::getInstance()-&gt;getContainer();
$acl = $container-&gt;get('acl');

if ($acl-&gt;canRead('directus_users')) {
    // read directus_users items
}
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/directus/directus-8-legacy/edit/master/advanced/api/data.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/5/2024, 4:29:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/advanced/api/configuration.html" class="prev">
        API Configuration
      </a></span> <span class="next"><a href="/cloud/overview.html">
        Overview
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fad5d7fd.js" defer></script><script src="/assets/js/2.b0de1993.js" defer></script><script src="/assets/js/1.cf19b05a.js" defer></script><script src="/assets/js/40.f1570932.js" defer></script>
  </body>
</html>
