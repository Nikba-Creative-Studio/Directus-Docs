(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{437:function(a,e,t){"use strict";t.r(e);var s=t(14),r=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"command-line-interface"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#command-line-interface"}},[a._v("#")]),a._v(" Command-Line Interface")]),a._v(" "),e("blockquote",[e("p",[a._v("Directus CLI provides commands that allow you to perform various tasks such as installation, resetting a user's email, or upgrading the database to the most recent Directus schema.")])]),a._v(" "),e("h2",{attrs:{id:"commands-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commands-list"}},[a._v("#")]),a._v(" Commands List")]),a._v(" "),e("table",[e("thead",[e("tr",[e("th",[a._v("Name")]),a._v(" "),e("th",[a._v("Description")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[e("a",{attrs:{href:"#configure-directus"}},[e("code",[a._v("install:config")])])]),a._v(" "),e("td",[a._v("Create a configuration file")])]),a._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"#populate-the-database-schema"}},[e("code",[a._v("install:database")])])]),a._v(" "),e("td",[a._v("Create the default tables and data")])]),a._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"#install-initial-configurations"}},[e("code",[a._v("install:install")])])]),a._v(" "),e("td",[a._v("Create initial configuration data")])]),a._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"#upgrade-directus-schema"}},[e("code",[a._v("db:upgrade")])])]),a._v(" "),e("td",[a._v("Upgrade the Database Schema")])]),a._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"#change-user-password"}},[e("code",[a._v("user:password")])])]),a._v(" "),e("td",[a._v("Change a user password")])]),a._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"#prune-old-log-files"}},[e("code",[a._v("log:prune")])])]),a._v(" "),e("td",[a._v("Remove old logs files")])])])]),a._v(" "),e("h2",{attrs:{id:"help"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#help"}},[a._v("#")]),a._v(" Help")]),a._v(" "),e("p",[a._v("You can use the "),e("code",[a._v("help")]),a._v(" command at any time to learn about available CLI actions:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# this will provide information about the current modules")]),a._v("\nphp bin/directus "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v("\n")])])]),e("p",[a._v('To get more information on an specific command you can type "help" followed by the command:')]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# this provide information about the **install** module")]),a._v("\nphp bin/directus "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("help")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])])]),e("h2",{attrs:{id:"install-module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-module"}},[a._v("#")]),a._v(" Install Module")]),a._v(" "),e("p",[a._v("Includes commands to install and configure Directus.")]),a._v(" "),e("h3",{attrs:{id:"configure-directus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configure-directus"}},[a._v("#")]),a._v(" Configure Directus:")]),a._v(" "),e("p",[a._v("Creates the default "),e("code",[a._v("config/_.php")]),a._v(" file.")]),a._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),e("p",[a._v("This command will overwrite any existing default configuration file at "),e("code",[a._v("config/_.php")]),a._v(".")])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus install:config "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db_host"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db_user"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db_pass"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("directus_email"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("db_unix_socket"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("table",[e("thead",[e("tr",[e("th",[a._v("Option")]),a._v(" "),e("th",[a._v("Description")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[e("code",[a._v("t")])]),a._v(" "),e("td",[a._v("Database type. ("),e("strong",[a._v("Only "),e("code",[a._v("mysql")]),a._v(" supported")]),a._v(")")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("h")])]),a._v(" "),e("td",[a._v("Database host")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("P")])]),a._v(" "),e("td",[a._v("Database port")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("n")])]),a._v(" "),e("td",[a._v("Database name (it must already exist)")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("u")])]),a._v(" "),e("td",[a._v("Database user's name")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("p")])]),a._v(" "),e("td",[a._v("Database user's password")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("e")])]),a._v(" "),e("td",[a._v("(Optional) The Directus email that will be used as sender in the mailing process")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("s")])]),a._v(" "),e("td",[a._v("Database unix socket")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("a")])]),a._v(" "),e("td",[a._v("Super Admin Token")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("c")])]),a._v(" "),e("td",[a._v("Enable/Disable CORS")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("k")])]),a._v(" "),e("td",[a._v("Unique Project's name (it must be required when creating new project in existing Directus setup)")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("timezone")])]),a._v(" "),e("td",[a._v("API Server default timezone")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("f")])]),a._v(" "),e("td",[a._v("Force file overwritten")])])])]),a._v(" "),e("h4",{attrs:{id:"example-http-example-local"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example-http-example-local"}},[a._v("#")]),a._v(" Example: http://example.local")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus install:config "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" localhost "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" directus "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" root "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" pass "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" super_admin_token "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" my-project\n")])])]),e("h4",{attrs:{id:"example-http-example-local-directus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example-http-example-local-directus"}},[a._v("#")]),a._v(" Example: http://example.local/directus")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus install:config "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" localhost "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" directus "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" root "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" pass "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" directus\n")])])]),e("h3",{attrs:{id:"populate-the-database-schema"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#populate-the-database-schema"}},[a._v("#")]),a._v(" Populate the Database Schema:")]),a._v(" "),e("p",[a._v("Creates all of the Directus Core tables based on the configuration files: "),e("code",[a._v("/config/{project_name}.php")]),a._v(".")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus install:database "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"install-initial-configurations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-initial-configurations"}},[a._v("#")]),a._v(" Install Initial Configurations:")]),a._v(" "),e("p",[a._v("Create the default admin user and the site's default settings.")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus install:install "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("admin_email"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("admin_password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("site_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("table",[e("thead",[e("tr",[e("th",[a._v("Option")]),a._v(" "),e("th",[a._v("Description")])])]),a._v(" "),e("tbody",[e("tr",[e("td",[e("code",[a._v("e")])]),a._v(" "),e("td",[a._v("Admin email")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("p")])]),a._v(" "),e("td",[a._v("Admin password")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("T")])]),a._v(" "),e("td",[a._v("Admin Static Auth Token")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("t")])]),a._v(" "),e("td",[a._v("Project title")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("a")])]),a._v(" "),e("td",[a._v("Project's Application URL")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("k")])]),a._v(" "),e("td",[a._v("Unique Project's name")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("timezone")])]),a._v(" "),e("td",[a._v("Admin timezone")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("locale")])]),a._v(" "),e("td",[a._v("Admin locale")])]),a._v(" "),e("tr",[e("td",[e("code",[a._v("f")])]),a._v(" "),e("td",[a._v("Recreate Directus core tables. Also remove all Directus data")])])])]),a._v(" "),e("h4",{attrs:{id:"example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[a._v("#")]),a._v(" Example")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus install:install "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" admin@directus.local "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" password "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Directus Example"')]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" directus\n")])])]),e("h2",{attrs:{id:"user-module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#user-module"}},[a._v("#")]),a._v(" User Module")]),a._v(" "),e("p",[a._v("Includes commands to manage Directus users")]),a._v(" "),e("h3",{attrs:{id:"change-user-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#change-user-password"}},[a._v("#")]),a._v(" Change User Password:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus user:password "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("user_email"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("new_password"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project_name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("ul",[e("li",[e("code",[a._v("user_email")]),a._v(" - The user's email")]),a._v(" "),e("li",[e("code",[a._v("new_password")]),a._v(" - The user's new password")]),a._v(" "),e("li",[e("code",[a._v("project_name")]),a._v(" - The project name")])]),a._v(" "),e("h4",{attrs:{id:"example-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[a._v("#")]),a._v(" Example")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus user:password "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" admin@directus.local "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" newpassword "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-k")]),a._v(" directus\n")])])]),e("h2",{attrs:{id:"database-module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#database-module"}},[a._v("#")]),a._v(" Database Module")]),a._v(" "),e("p",[a._v("Includes commands to manage Directus database schema")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("This requires that Directus has a valid connection configured in "),e("code",[a._v("config/{project_name}.php")]),a._v(".")])]),a._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[a._v("WARNING")]),a._v(" "),e("p",[a._v("Always backup your database before running the database module to prevent data loss.")])]),a._v(" "),e("h3",{attrs:{id:"upgrade-directus-schema"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-directus-schema"}},[a._v("#")]),a._v(" Upgrade Directus Schema")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ bin/directus db:upgrade -N <project-name>\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("Don't forget to provide the project key when updating the database")])]),a._v(" "),e("h2",{attrs:{id:"log-module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#log-module"}},[a._v("#")]),a._v(" Log Module")]),a._v(" "),e("h3",{attrs:{id:"prune-old-log-files"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prune-old-log-files"}},[a._v("#")]),a._v(" Prune Old Log Files")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus log:prune "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("days"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("p",[e("code",[a._v("<days>")]),a._v(" is optional. The default value is "),e("code",[a._v("30")]),a._v(" days.")]),a._v(" "),e("p",[a._v("Removes all the logs that were last modified "),e("code",[a._v("<days>")]),a._v(" ago. it uses "),e("a",{attrs:{href:"http://php.net/manual/en/function.filemtime.php",target:"_blank",rel:"noopener noreferrer"}},[e("code",[a._v("filemtime")]),e("OutboundLink")],1),a._v(" function to determine the last modified time.")]),a._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("You can setup a cronjob to clean old files at a set frequency")])]),a._v(" "),e("h2",{attrs:{id:"maintenance-module"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#maintenance-module"}},[a._v("#")]),a._v(" Maintenance Module")]),a._v(" "),e("p",[a._v('Enables/disables the maintenance mode. When maintenance mode is "on" the api returns all requests with '),e("code",[a._v("503 Service Unavailable")]),a._v(" and a appropriate error message ("),e("RouterLink",{attrs:{to:"/api/reference.html"}},[a._v("see Error Codes")]),a._v(").")],1),a._v(" "),e("p",[e("code",[a._v("maintenance:status")]),a._v(' tells you if maintenance mode is currently "on" or "off".')]),a._v(" "),e("h3",{attrs:{id:"usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[a._v("#")]),a._v(" Usage:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("php bin/directus maintenance:on\nphp bin/directus maintenance:off\nphp bin/directus maintenance:status\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),e("p",[a._v("You can manually activate/deactivate the maintenance mode by creating/removing the file "),e("code",[a._v("logs/maintenance")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);