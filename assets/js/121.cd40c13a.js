(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{461:function(e,t,a){"use strict";a.r(t);var s=a(14),o=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"installing-from-source"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-from-source"}},[e._v("#")]),e._v(" Installing from source")]),e._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[e._v("Advanced")]),e._v(" "),t("p",[e._v("You most likely don't need this. Please don't install Directus from source unless you're absolutely sure of what you're doing.")])]),e._v(" "),t("p",[e._v("When you have a complex infrastructure that requires special CI and CD integrations that will handle building dependencies etc, you might want to build from source.")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#step-1-clone-the-app-and-api-repos-separately"}},[e._v("Step 1: Clone the app and API repos separately")])]),t("li",[t("a",{attrs:{href:"#step-2-install-the-dependencies"}},[e._v("Step 2: Install the dependencies")])]),t("li",[t("a",{attrs:{href:"#step-3-build-the-app-for-production"}},[e._v("Step 3: Build the app for production")])]),t("li",[t("a",{attrs:{href:"#step-4-move-the-app-inside-the-api"}},[e._v("Step 4: Move the app inside the API.")])]),t("li",[t("a",{attrs:{href:"#optional-step-5-remove-unnecessary-files"}},[e._v("(Optional) Step 5: Remove unnecessary files")])])])]),t("p"),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("CI/CD")]),e._v(" "),t("p",[e._v("If you're thinking about using this to auto-deploy new versions of Directus, you can also consider using a build script to remove the "),t("code",[e._v("vendor")]),e._v(" folder and re-install the dependencies using composer. That will net you the same end-result will still being able to rely on the GitHub releases.")])]),e._v(" "),t("h2",{attrs:{id:"step-1-clone-the-app-and-api-repos-separately"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-1-clone-the-app-and-api-repos-separately"}},[e._v("#")]),e._v(" Step 1: Clone the app and API repos separately")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("directus/directus")]),e._v(' repo contains a pre-built bundle for both at all times. There is no "source bundle" available. You have to clone the individual repos for the app and API; '),t("code",[e._v("directus/app")]),e._v(" and "),t("code",[e._v("directus/api")]),e._v(" respectively.")]),e._v(" "),t("p",[e._v("Make sure to be on the latest tagged release. You can use this snippet to get to the latest tag (h/t to "),t("a",{attrs:{href:"https://julienrenaux.fr/2013/10/04/how-to-automatically-checkout-the-latest-tag-of-a-git-repository/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Julien Renaux"),t("OutboundLink")],1),e._v("):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git fetch --tags\n\n$ latestTag=$(git describe --tags `git rev-list --tags --max-count=1`)\n\n$ git checkout $latestTag\n")])])]),t("h2",{attrs:{id:"step-2-install-the-dependencies"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-2-install-the-dependencies"}},[e._v("#")]),e._v(" Step 2: Install the dependencies")]),e._v(" "),t("h4",{attrs:{id:"app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#app"}},[e._v("#")]),e._v(" App")]),e._v(" "),t("p",[e._v("The app uses Vue and manages its dependencies through NPM. Install the npm dependencies using npm or yarn.")]),e._v(" "),t("h4",{attrs:{id:"api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[e._v("#")]),e._v(" API")]),e._v(" "),t("p",[e._v("The API uses Composer for its package management. Install the dependencies using Composer.")]),e._v(" "),t("h2",{attrs:{id:"step-3-build-the-app-for-production"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-3-build-the-app-for-production"}},[e._v("#")]),e._v(" Step 3: Build the app for production")]),e._v(" "),t("p",[e._v("Running "),t("code",[e._v("npm run build")]),e._v(" will build the app production ready to the "),t("code",[e._v("dist")]),e._v(" folder.")]),e._v(" "),t("h2",{attrs:{id:"step-4-move-the-app-inside-the-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#step-4-move-the-app-inside-the-api"}},[e._v("#")]),e._v(" Step 4: Move the app inside the API.")]),e._v(" "),t("p",[e._v("The app expects to be served from the APIs "),t("code",[e._v("/public/admin")]),e._v(" folder. Therefore, you have to move the contents of the app's "),t("code",[e._v("dist")]),e._v(" folder into the APIs "),t("code",[e._v("/public/admin")]),e._v(" folder.")]),e._v(" "),t("h2",{attrs:{id:"optional-step-5-remove-unnecessary-files"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#optional-step-5-remove-unnecessary-files"}},[e._v("#")]),e._v(" (Optional) Step 5: Remove unnecessary files")]),e._v(" "),t("p",[e._v("Depending on your needs, you might not want / need some of the files in the API repo. The folders that are required to run Directus are: "),t("code",[e._v("bin")]),e._v(", "),t("code",[e._v("config")]),e._v(", "),t("code",[e._v("logs")]),e._v(", "),t("code",[e._v("migrations")]),e._v(", "),t("code",[e._v("public")]),e._v(", "),t("code",[e._v("src")]),e._v(", "),t("code",[e._v("vendor")]),e._v(".")])])}),[],!1,null,null,null);t.default=o.exports}}]);