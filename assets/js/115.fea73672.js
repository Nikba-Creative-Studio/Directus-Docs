(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{453:function(t,e,s){"use strict";s.r(e);var a=s(14),o=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#status"}},[t._v("#")]),t._v(" Status")]),t._v(" "),e("blockquote",[e("p",[t._v("The Status interface adds soft-delete and workflow options to its parent collection. Let's take a look at how to properly configure it to take full advantage of its power and flexibility.")])]),t._v(" "),e("h2",{attrs:{id:"status-mapping"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#status-mapping"}},[t._v("#")]),t._v(" Status Mapping")]),t._v(" "),e("p",[t._v("There are three status options added by default, however you can add as many as you'd like. Each option has paramenters that define how it will look and work.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Option")]),t._v(" "),e("th",[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("code",[t._v("key")])]),t._v(" "),e("td",[t._v("String (Numbers can be used as strings). Each option object is defined by a key, this key is the value that is saved into the database")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("name")])]),t._v(" "),e("td",[t._v("String. The name presented to the user in the App")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("text_color")])]),t._v(" "),e("td",[t._v("Directus Color Name. The text color of the badge on the browse items page")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("background_color")])]),t._v(" "),e("td",[t._v("Directus Color Name. The background color of the badge (or dot if using the Simple Badge option)")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("browse_badge")])]),t._v(" "),e("td",[t._v("Boolean. Whether to show the badge on the browse items page or not")])]),t._v(" "),e("tr",[e("td",[e("code",[t._v("soft_delete")])]),t._v(" "),e("td",[t._v("Boolean. If true, items will not be returned by default in the App or API. Only Admin users have access to soft-deleted items")])])])]),t._v(" "),e("h3",{attrs:{id:"example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"published"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Published"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text_color"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"white"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"background_color"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accent"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browse_badge"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"soft_delete"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"draft"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Draft"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text_color"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"white"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"background_color"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blue-grey-200"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browse_badge"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"soft_delete"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deleted"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Deleted"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text_color"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"white"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"background_color"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browse_badge"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"soft_delete"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"soft-delete"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#soft-delete"}},[t._v("#")]),t._v(" Soft Delete")]),t._v(" "),e("p",[t._v("As mentioned above, Soft Delete is meant to "),e("em",[t._v("act")]),t._v(" as if an item has been truly deleted, but without permanently removing it from the database. Soft-deleted items are hidden from both the App and API responses unless explicitely requested by an Admin "),e("RouterLink",{attrs:{to:"/api/reference.html#status"}},[t._v("using the "),e("code",[t._v("status")]),t._v(" parameter")]),t._v(". Non-admin users do not have access to soft-deleted items.")],1),t._v(" "),e("p",[t._v('As of now there is no way to "resurrect" soft-deleted items through the App, they are for all intents and purposes, deleted. However these items still exist in the database and can be acceessed there.')]),t._v(" "),e("p",[t._v("When deleting an item, the API does the following:")]),t._v(" "),e("ol",[e("li",[t._v("Check if the collection has a status field")]),t._v(" "),e("li",[t._v("Check if the delta data has the status field (meaning the status was changed)")]),t._v(" "),e("li",[t._v("Check if the new status value ("),e("em",[t._v("from delta data")]),t._v(") has "),e("code",[t._v("soft_delete = true")])])]),t._v(" "),e("ul",[e("li",[t._v("If yes, it sets the "),e("code",[t._v("action")]),t._v(" to "),e("code",[t._v("SOFT_DELETE")])]),t._v(" "),e("li",[t._v("If no, it hard deletes the item (permanently removed from the database)")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("There may be conflicts when using soft-delete alongside unique columns. This is because soft-deleting is a Directus construct, while "),e("code",[t._v("unique")]),t._v(" columns are enforced at the database level. Therefore if you soft-delete an item with a "),e("em",[t._v("unique")]),t._v(" field, you will get an error if you try to add that value again. The solution would be to remove the unique constraint, or do one of the following:")]),t._v(" "),e("ul",[e("li",[t._v("Set the "),e("code",[t._v("soft_delete")]),t._v(" setting to "),e("code",[t._v("false")]),t._v(' so that it is just another "normal" status option.')]),t._v(" "),e("li",[t._v("Remove the deleted status option, then simply use item red delete button for hard-deleting.")]),t._v(" "),e("li",[t._v("Delete the "),e("code",[t._v("status")]),t._v(" field altogether, users with permission to delete will hard delete items.")])])]),t._v(" "),e("h2",{attrs:{id:"workflow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#workflow"}},[t._v("#")]),t._v(" Workflow")]),t._v(" "),e("p",[t._v("The status interface also enables extended permission options that allow "),e("RouterLink",{attrs:{to:"/guides/permissions.html#status-level"}},[t._v("setting permissions based on an item's status")]),t._v(".")],1),t._v(" "),e("h2",{attrs:{id:"custom-status-interfaces"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-status-interfaces"}},[t._v("#")]),t._v(" Custom Status Interfaces")]),t._v(" "),e("p",[t._v("The core status interface should work for 90% of use-cases, but you can still take advantage of the functionality with different styling or interactions. To do this you would "),e("RouterLink",{attrs:{to:"/extensions/interfaces.html"}},[t._v("create a custom interface")]),t._v(" that uses the "),e("code",[t._v("status")]),t._v(" "),e("RouterLink",{attrs:{to:"/guides/field-types.html"}},[t._v("field type")]),t._v(".")],1)])}),[],!1,null,null,null);e.default=o.exports}}]);